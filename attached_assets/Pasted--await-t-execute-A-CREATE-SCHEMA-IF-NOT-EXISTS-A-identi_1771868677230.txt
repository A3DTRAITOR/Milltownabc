		`;await t.execute(A`CREATE SCHEMA IF NOT EXISTS ${A.identifier(a)}`),await t.execute(o);let c=(await t.all(A`select id, hash, created_at from ${A.identifier(a)}.${A.identifier(n)} order by created_at desc limit 1`))[0];await t.transaction(async d=>{for await(let l of e)if(!c||Number(c.created_at)<l.folderMillis){for(let f of l.sql)await d.execute(A.raw(f));await d.execute(A`insert into ${A.identifier(a)}.${A.identifier(n)} ("hash", "created_at") values(${l.hash}, ${l.folderMillis})`)}})}escapeName(e){return`"${e}"`}escapeParam(e){return`$${e+1}`}escapeString(e){return`'${e.replace(/'/g,"''")}'`}buildWithCTE(e){if(!e?.length)return;let t=[A`with `];for(let[r,n]of e.entries())t.push(A`${A.identifier(n._.alias)} as (${n._.sql})`),r<e.length-1&&t.push(A`, `);return t.push(A` `),A.join(t)}buildDeleteQuery({table:e,where:t,returning:r,withList:n}){let a=this.buildWithCTE(n),o=r?A` returning ${this.buildSelection(r,{isSingleTable:!0})}`:void 0,s=t?A` where ${t}`:void 0;return A`${a}delete from ${e}${s}${o}`}buildUpdateSet(e,t){let r=e[J.Symbol.Columns],n=Object.keys(r).filter(o=>t[o]!==void 0||r[o]?.onUpdateFn!==void 0),a=n.length;return A.join(n.flatMap((o,s)=>{let c=r[o],d=t[o]??A.param(c.onUpdateFn(),c),l=A`${A.identifier(this.casing.getColumnCasing(c))} = ${d}`;return s<a-1?[l,A.raw(", ")]:[l]}))}buildUpdateQuery({table:e,set:t,where:r,returning:n,withList:a,from:o,joins:s}){let c=this.buildWithCTE(a),d=e[Rn.Symbol.Name],l=e[Rn.Symbol.Schema],f=e[Rn.Symbol.OriginalName],p=d===f?void 0:d,_=A`${l?A`${A.identifier(l)}.`:void 0}${A.identifier(f)}${p&&A` ${A.identifier(p)}`}`,j=this.buildUpdateSet(e,t),w=o&&A.join([A.raw(" from "),this.buildFromTable(o)]),h=this.buildJoins(s),O=n?A` returning ${this.buildSelection(n,{isSingleTable:!o})}`:void 0,P=r?A` where ${r}`:void 0;return A`${c}update ${_} set ${j}${w}${h}${P}${O}`}buildSelection(e,{isSingleTable:t=!1}={}){let r=e.length,n=e.flatMap(({field:a},o)=>{let s=[];if(q(a,te.Aliased)&&a.isSelectionField)s.push(A.identifier(a.fieldAlias));else if(q(a,te.Aliased)||q(a,te)){let c=q(a,te.Aliased)?a.sql:a;t?s.push(new te(c.queryChunks.map(d=>q(d,G)?A.identifier(this.casing.getColumnCasing(d)):d))):s.push(c),q(a,te.Aliased)&&s.push(A` as ${A.identifier(a.fieldAlias)}`)}else q(a,Dt)&&(t?s.push(A.identifier(this.casing.getColumnCasing(a))):s.push(a));return o<r-1&&s.push(A`, `),s});return A.join(n)}buildJoins(e){if(!e||e.length===0)return;let t=[];for(let[r,n]of e.entries()){r===0&&t.push(A` `);let a=n.table,o=n.lateral?A` lateral`:void 0;if(q(a,Rn)){let s=a[Rn.Symbol.Name],c=a[Rn.Symbol.Schema],d=a[Rn.Symbol.OriginalName],l=s===d?void 0:n.alias;t.push(A`${A.raw(n.joinType)} join${o} ${c?A`${A.identifier(c)}.`:void 0}${A.identifier(d)}${l&&A` ${A.identifier(l)}`} on ${n.on}`)}else if(q(a,io)){let s=a[cr].name,c=a[cr].schema,d=a[cr].originalName,l=s===d?void 0:n.alias;t.push(A`${A.raw(n.joinType)} join${o} ${c?A`${A.identifier(c)}.`:void 0}${A.identifier(d)}${l&&A` ${A.identifier(l)}`} on ${n.on}`)}else t.push(A`${A.raw(n.joinType)} join${o} ${a} on ${n.on}`);r<e.length-1&&t.push(A` `)}return A.join(t)}buildFromTable(e){if(q(e,J)&&e[J.Symbol.OriginalName]!==e[J.Symbol.Name]){let t=A`${A.identifier(e[J.Symbol.OriginalName])}`;return e[J.Symbol.Schema]&&(t=A`${A.identifier(e[J.Symbol.Schema])}.${t}`),A`${t} ${A.identifier(e[J.Symbol.Name])}`}return e}buildSelectQuery({withList:e,fields:t,fieldsFlat:r,where:n,having:a,table:o,joins:s,orderBy:c,groupBy:d,limit:l,offset:f,lockingClause:p,distinct:_,setOperators:j}){let w=r??Ks(t);for(let He of w)if(q(He.field,Dt)&&Co(He.field.table)!==(q(o,Li)?o._.alias:q(o,FW)?o[cr].name:q(o,te)?void 0:Co(o))&&!(ue=>s?.some(({alias:Ae})=>Ae===(ue[J.Symbol.IsAlias]?Co(ue):ue[J.Symbol.BaseName])))(He.field.table)){let ue=Co(He.field.table);throw new Error(`Your "${He.path.join("->")}" field references a column "${ue}"."${He.field.name}", but the table "${ue}" is not part of the query! Did you forget to join it?`)}let h=!s||s.length===0,O=this.buildWithCTE(e),P;_&&(P=_===!0?A` distinct`:A` distinct on (${A.join(_.on,A`, `)})`);let S=this.buildSelection(w,{isSingleTable:h}),E=this.buildFromTable(o),D=this.buildJoins(s),R=n?A` where ${n}`:void 0,C=a?A` having ${a}`:void 0,z;c&&c.length>0&&(z=A` order by ${A.join(c,A`, `)}`);let N;d&&d.length>0&&(N=A` group by ${A.join(d,A`, `)}`);let ne=typeof l=="object"||typeof l=="number"&&l>=0?A` limit ${l}`:void 0,de=f?A` offset ${f}`:void 0,Ee=A.empty();if(p){let He=A` for ${A.raw(p.strength)}`;p.config.of&&He.append(A` of ${A.join(Array.isArray(p.config.of)?p.config.of:[p.config.of],A`, `)}`),p.config.noWait?He.append(A` no wait`):p.config.skipLocked&&He.append(A` skip locked`),Ee.append(He)}let _e=A`${O}select${P} ${S} from ${E}${D}${R}${N}${C}${z}${ne}${de}${Ee}`;return j.length>0?this.buildSetOperations(_e,j):_e}buildSetOperations(e,t){let[r,...n]=t;if(!r)throw new Error("Cannot pass undefined values to any set operator");return n.length===0?this.buildSetOperationQuery({leftSelect:e,setOperator:r}):this.buildSetOperations(this.buildSetOperationQuery({leftSelect:e,setOperator:r}),n)}buildSetOperationQuery({leftSelect:e,setOperator:{type:t,isAll:r,rightSelect:n,limit:a,orderBy:o,offset:s}}){let c=A`(${e.getSQL()}) `,d=A`(${n.getSQL()})`,l;if(o&&o.length>0){let j=[];for(let w of o)if(q(w,G))j.push(A.identifier(w.name));else if(q(w,te)){for(let h=0;h<w.queryChunks.length;h++){let O=w.queryChunks[h];q(O,G)&&(w.queryChunks[h]=A.identifier(O.name))}j.push(A`${w}`)}else j.push(A`${w}`);l=A` order by ${A.join(j,A`, `)} `}let f=typeof a=="object"||typeof a=="number"&&a>=0?A` limit ${a}`:void 0,p=A.raw(`${t} ${r?"all ":""}`),_=s?A` offset ${s}`:void 0;return A`${c}${p}${d}${l}${f}${_}`}buildInsertQuery({table:e,values:t,onConflict:r,returning:n,withList:a,select:o,overridingSystemValue_:s}){let c=[],d=e[J.Symbol.Columns],l=Object.entries(d).filter(([O,P])=>!P.shouldDisableInsert()),f=l.map(([,O])=>A.identifier(this.casing.getColumnCasing(O)));if(o){let O=t;q(O,te)?c.push(O):c.push(O.getSQL())}else{let O=t;c.push(A.raw("values "));for(let[P,S]of O.entries()){let E=[];for(let[D,R]of l){let C=S[D];if(C===void 0||q(C,zo)&&C.value===void 0)if(R.defaultFn!==void 0){let z=R.defaultFn(),N=q(z,te)?z:A.param(z,R);E.push(N)}else if(!R.default&&R.onUpdateFn!==void 0){let z=R.onUpdateFn(),N=q(z,te)?z:A.param(z,R);E.push(N)}else E.push(A`default`);else E.push(C)}c.push(E),P<O.length-1&&c.push(A`, `)}}let p=this.buildWithCTE(a),_=A.join(c),j=n?A` returning ${this.buildSelection(n,{isSingleTable:!0})}`:void 0,w=r?A` on conflict ${r}`:void 0,h=s===!0?A`overriding system value `:void 0;return A`${p}insert into ${e} ${f} ${h}${_}${w}${j}`}buildRefreshMaterializedViewQuery({view:e,concurrently:t,withNoData:r}){let n=t?A` concurrently`:void 0,a=r?A` with no data`:void 0;return A`refresh materialized view${n} ${e}${a}`}prepareTyping(e){return q(e,aZ)||q(e,nZ)?"json":q(e,oZ)?"decimal":q(e,uZ)?"time":q(e,sZ)||q(e,lZ)?"timestamp":q(e,rZ)||q(e,iZ)?"date":q(e,cZ)?"uuid":"none"}sqlToQuery(e,t){return e.toQuery({casing:this.casing,escapeName:this.escapeName,escapeParam:this.escapeParam,escapeString:this.escapeString,prepareTyping:this.prepareTyping,invokeSource:t})}buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:r,table:n,tableConfig:a,queryConfig:o,tableAlias:s,nestedQueryRelation:c,joinOn:d}){let l=[],f,p,_=[],j,w=[];if(o===!0)l=Object.entries(a.columns).map(([P,S])=>({dbKey:S.name,tsKey:P,field:Sd(S,s),relationTableTsKey:void 0,isJson:!1,selection:[]}));else{let O=Object.fromEntries(Object.entries(a.columns).map(([C,z])=>[C,Sd(z,s)]));if(o.where){let C=typeof o.where=="function"?o.where(O,Met()):o.where;j=C&&kX(C,s)}let P=[],S=[];if(o.columns){let C=!1;for(let[z,N]of Object.entries(o.columns))N!==void 0&&z in a.columns&&(!C&&N===!0&&(C=!0),S.push(z));S.length>0&&(S=C?S.filter(z=>o.columns?.[z]===!0):Object.keys(a.columns).filter(z=>!S.includes(z)))}else S=Object.keys(a.columns);for(let C of S){let z=a.columns[C];P.push({tsKey:C,value:z})}let E=[];o.with&&(E=Object.entries(o.with).filter(C=>!!C[1]).map(([C,z])=>({tsKey:C,queryConfig:z,relation:a.relations[C]})));let D;if(o.extras){D=typeof o.extras=="function"?o.extras(O,{sql:A}):o.extras;for(let[C,z]of Object.entries(D))P.push({tsKey:C,value:t1e(z,s)})}for(let{tsKey:C,value:z}of P)l.push({dbKey:q(z,te.Aliased)?z.fieldAlias:a.columns[C].name,tsKey:C,field:q(z,Dt)?Sd(z,s):z,relationTableTsKey:void 0,isJson:!1,selection:[]});let R=typeof o.orderBy=="function"?o.orderBy(O,Det()):o.orderBy??[];Array.isArray(R)||(R=[R]),_=R.map(C=>q(C,Dt)?Sd(C,s):kX(C,s)),f=o.limit,p=o.offset;for(let{tsKey:C,queryConfig:z,relation:N}of E){let ne=Ret(t,r,N),de=JI(N.referencedTable),Ee=r[de],_e=`${s}_${C}`,He=ZI(...ne.fields.map((Re,Lr)=>Xe(Sd(ne.references[Lr],_e),Sd(Re,s)))),ue=this.buildRelationalQueryWithoutPK({fullSchema:e,schema:t,tableNamesMap:r,table:e[Ee],tableConfig:t[Ee],queryConfig:q(N,UT)?z===!0?{limit:1}:{...z,limit:1}:z,tableAlias:_e,joinOn:He,nestedQueryRelation:N}),Ae=A`${A.identifier(_e)}.${A.identifier("data")}`.as(C);w.push({on:A`true`,table:new Li(ue.sql,{},_e),alias:_e,joinType:"left",lateral:!0}),l.push({dbKey:C,tsKey:C,field:Ae,relationTableTsKey:Ee,isJson:!0,selection:ue.selection})}}if(l.length===0)throw new eZ({message:`No fields selected for table "${a.tsName}" ("${s}")`});let h;if(j=ZI(d,j),c){let O=A`json_build_array(${A.join(l.map(({field:E,tsKey:D,isJson:R})=>R?A`${A.identifier(`${s}_${D}`)}.${A.identifier("data")}`:q(E,te.Aliased)?E.sql:E),A`, `)})`;q(c,dZ)&&(O=A`coalesce(json_agg(${O}${_.length>0?A` order by ${A.join(_,A`, `)}`:void 0}), '[]'::json)`);let P=[{dbKey:"data",tsKey:"data",field:O.as("data"),isJson:!0,relationTableTsKey:a.tsName,selection:l}];f!==void 0||p!==void 0||_.length>0?(h=this.buildSelectQuery({table:xX(n,s),fields:{},fieldsFlat:[{path:[],field:A.raw("*")}],where:j,limit:f,offset:p,orderBy:_,setOperators:[]}),j=void 0,f=void 0,p=void 0,_=[]):h=xX(n,s),h=this.buildSelectQuery({table:q(h,Rn)?h:new Li(h,{},s),fields:{},fieldsFlat:P.map(({field:E})=>({path:[],field:q(E,Dt)?Sd(E,s):E})),joins:w,where:j,limit:f,offset:p,orderBy:_,setOperators:[]})}else h=this.buildSelectQuery({table:xX(n,s),fields:{},fieldsFlat:l.map(({field:O})=>({path:[],field:q(O,Dt)?Sd(O,s):O})),joins:w,where:j,limit:f,offset:p,orderBy:_,setOperators:[]});return{tableTsKey:a.tsName,sql:h,selection:l}}};var Ane=class{static[T]="TypedQueryBuilder";getSelectedFields(){return this._.selectedFields}};var ja=class{static[T]="PgSelectBuilder";fields;session;dialect;withList=[];distinct;constructor(e){this.fields=e.fields,this.session=e.session,this.dialect=e.dialect,e.withList&&(this.withList=e.withList),this.distinct=e.distinct}authToken;setToken(e){return this.authToken=e,this}from(e){let t=!!this.fields,r=e,n;return this.fields?n=this.fields:q(r,Li)?n=Object.fromEntries(Object.keys(r._.selectedFields).map(a=>[a,r[a]])):q(r,FW)?n=r[cr].selectedFields:q(r,te)?n={}:n=Ene(r),new Nne({table:r,fields:n,isPartialSelect:t,session:this.session,dialect:this.dialect,withList:this.withList,distinct:this.distinct}).setToken(this.authToken)}},POe=class extends Ane{static[T]="PgSelectQueryBuilder";_;config;joinsNotNullableMap;tableName;isPartialSelect;session;dialect;constructor({table:e,fields:t,isPartialSelect:r,session:n,dialect:a,withList:o,distinct:s}){super(),this.config={withList:o,table:e,fields:{...t},distinct:s,setOperators:[]},this.isPartialSelect=r,this.session=n,this.dialect=a,this._={selectedFields:t},this.tableName=mz(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}createJoin(e){return(t,r)=>{let n=this.tableName,a=mz(t);if(typeof a=="string"&&this.config.joins?.some(o=>o.alias===a))throw new Error(`Alias "${a}" is already used in this query`);if(!this.isPartialSelect&&(Object.keys(this.joinsNotNullableMap).length===1&&typeof n=="string"&&(this.config.fields={[n]:this.config.fields}),typeof a=="string"&&!q(t,te))){let o=q(t,Li)?t._.selectedFields:q(t,io)?t[cr].selectedFields:t[J.Symbol.Columns];this.config.fields[a]=o}if(typeof r=="function"&&(r=r(new Proxy(this.config.fields,new ni({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.joins||(this.config.joins=[]),this.config.joins.push({on:r,table:t,joinType:e,alias:a}),typeof a=="string")switch(e){case"left":{this.joinsNotNullableMap[a]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[a]=!0;break}case"inner":{this.joinsNotNullableMap[a]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([o])=>[o,!1])),this.joinsNotNullableMap[a]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");createSetOperator(e,t){return r=>{let n=typeof r=="function"?r(xAr()):r;if(!tZ(this.getSelectedFields(),n.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return this.config.setOperators.push({type:e,isAll:t,rightSelect:n}),this}}union=this.createSetOperator("union",!1);unionAll=this.createSetOperator("union",!0);intersect=this.createSetOperator("intersect",!1);intersectAll=this.createSetOperator("intersect",!0);except=this.createSetOperator("except",!1);exceptAll=this.createSetOperator("except",!0);addSetOperators(e){return this.config.setOperators.push(...e),this}where(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new ni({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.where=e,this}having(e){return typeof e=="function"&&(e=e(new Proxy(this.config.fields,new ni({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))),this.config.having=e,this}groupBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new ni({sqlAliasedBehavior:"alias",sqlBehavior:"sql"})));this.config.groupBy=Array.isArray(t)?t:[t]}else this.config.groupBy=e;return this}orderBy(...e){if(typeof e[0]=="function"){let t=e[0](new Proxy(this.config.fields,new ni({sqlAliasedBehavior:"alias",sqlBehavior:"sql"}))),r=Array.isArray(t)?t:[t];this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=r:this.config.orderBy=r}else{let t=e;this.config.setOperators.length>0?this.config.setOperators.at(-1).orderBy=t:this.config.orderBy=t}return this}limit(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).limit=e:this.config.limit=e,this}offset(e){return this.config.setOperators.length>0?this.config.setOperators.at(-1).offset=e:this.config.offset=e,this}for(e,t={}){return this.config.lockingClause={strength:e,config:t},this}getSQL(){return this.dialect.buildSelectQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}as(e){return new Proxy(new Li(this.getSQL(),this.config.fields,e),new ni({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}getSelectedFields(){return new Proxy(this.config.fields,new ni({alias:this.tableName,sqlAliasedBehavior:"alias",sqlBehavior:"error"}))}$dynamic(){return this}},Nne=class extends POe{static[T]="PgSelect";_prepare(e){let{session:t,config:r,dialect:n,joinsNotNullableMap:a,authToken:o}=this;if(!t)throw new Error("Cannot execute a query on a query builder. Please use a database instance instead.");return lr.startActiveSpan("drizzle.prepareQuery",()=>{let s=Ks(r.fields),c=t.prepareQuery(n.sqlToQuery(this.getSQL()),s,e,!0);return c.joinsNotNullableMap=a,c.setToken(o)})}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>lr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};Qke(Nne,[wa]);function VW(i,e){return(t,r,...n)=>{let a=[r,...n].map(o=>({type:i,isAll:e,rightSelect:o}));for(let o of a)if(!tZ(t.getSelectedFields(),o.rightSelect.getSelectedFields()))throw new Error("Set operator error (union / intersect / except): selected fields are not the same or are in a different order");return t.addSetOperators(a)}}var xAr=()=>({union:kAr,unionAll:eNr,intersect:tNr,intersectAll:rNr,except:iNr,exceptAll:nNr}),kAr=VW("union",!1),eNr=VW("union",!0),tNr=VW("intersect",!1),rNr=VW("intersect",!0),iNr=VW("except",!1),nNr=VW("except",!0);var KW=class{static[T]="PgQueryBuilder";dialect;dialectConfig;constructor(e){this.dialect=q(e,LT)?e:void 0,this.dialectConfig=q(e,LT)?void 0:e}$with=(e,t)=>{let r=this;return{as:a=>(typeof a=="function"&&(a=a(r)),new Proxy(new BW(a.getSQL(),t??("getSelectedFields"in a?a.getSelectedFields()??{}:{}),e,!0),new ni({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};with(...e){let t=this;function r(o){return new ja({fields:o??void 0,session:void 0,dialect:t.getDialect(),withList:e})}function n(o){return new ja({fields:o??void 0,session:void 0,dialect:t.getDialect(),distinct:!0})}function a(o,s){return new ja({fields:s??void 0,session:void 0,dialect:t.getDialect(),distinct:{on:o}})}return{select:r,selectDistinct:n,selectDistinctOn:a}}select(e){return new ja({fields:e??void 0,session:void 0,dialect:this.getDialect()})}selectDistinct(e){return new ja({fields:e??void 0,session:void 0,dialect:this.getDialect(),distinct:!0})}selectDistinctOn(e,t){return new ja({fields:t??void 0,session:void 0,dialect:this.getDialect(),distinct:{on:e}})}getDialect(){return this.dialect||(this.dialect=new LT(this.dialectConfig)),this.dialect}};var pZ=class{constructor(e,t,r,n,a){this.table=e,this.session=t,this.dialect=r,this.withList=n,this.overridingSystemValue_=a}static[T]="PgInsertBuilder";authToken;setToken(e){return this.authToken=e,this}overridingSystemValue(){return this.overridingSystemValue_=!0,this}values(e){if(e=Array.isArray(e)?e:[e],e.length===0)throw new Error("values() must be called with at least one value");let t=e.map(r=>{let n={},a=this.table[J.Symbol.Columns];for(let o of Object.keys(r)){let s=r[o];n[o]=q(s,te)?s:new zo(s,a[o])}return n});return new qne(this.table,t,this.session,this.dialect,this.withList,!1,this.overridingSystemValue_).setToken(this.authToken)}select(e){let t=typeof e=="function"?e(new KW):e;if(!q(t,te)&&!tZ(this.table[One],t._.selectedFields))throw new Error("Insert select error: selected fields are not the same or are in a different order compared to the table definition");return new qne(this.table,t,this.session,this.dialect,this.withList,!0)}},qne=class extends wa{constructor(e,t,r,n,a,o,s){super(),this.session=r,this.dialect=n,this.config={table:e,values:t,withList:a,select:o,overridingSystemValue_:s}}static[T]="PgInsert";config;returning(e=this.config.table[J.Symbol.Columns]){return this.config.returningFields=e,this.config.returning=Ks(e),this}onConflictDoNothing(e={}){if(e.target===void 0)this.config.onConflict=A`do nothing`;else{let t="";t=Array.isArray(e.target)?e.target.map(n=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(n))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target));let r=e.where?A` where ${e.where}`:void 0;this.config.onConflict=A`(${A.raw(t)})${r} do nothing`}return this}onConflictDoUpdate(e){if(e.where&&(e.targetWhere||e.setWhere))throw new Error('You cannot use both "where" and "targetWhere"/"setWhere" at the same time - "where" is deprecated, use "targetWhere" or "setWhere" instead.');let t=e.where?A` where ${e.where}`:void 0,r=e.targetWhere?A` where ${e.targetWhere}`:void 0,n=e.setWhere?A` where ${e.setWhere}`:void 0,a=this.dialect.buildUpdateSet(this.config.table,Dne(this.config.table,e.set)),o="";return o=Array.isArray(e.target)?e.target.map(s=>this.dialect.escapeName(this.dialect.casing.getColumnCasing(s))).join(","):this.dialect.escapeName(this.dialect.casing.getColumnCasing(e.target)),this.config.onConflict=A`(${A.raw(o)})${r} do update set ${a}${t}${n}`,this}getSQL(){return this.dialect.buildInsertQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return lr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>lr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken));getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ni({alias:Co(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Bne=class extends wa{constructor(e,t,r){super(),this.session=t,this.dialect=r,this.config={view:e}}static[T]="PgRefreshMaterializedView";config;concurrently(){if(this.config.withNoData!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.concurrently=!0,this}withNoData(){if(this.config.concurrently!==void 0)throw new Error("Cannot use concurrently and withNoData together");return this.config.withNoData=!0,this}getSQL(){return this.dialect.buildRefreshMaterializedViewQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){return lr.startActiveSpan("drizzle.prepareQuery",()=>this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),void 0,e,!0))}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>lr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(e,this.authToken))};var _Z=class{constructor(e,t,r,n){this.table=e,this.session=t,this.dialect=r,this.withList=n}static[T]="PgUpdateBuilder";authToken;setToken(e){return this.authToken=e,this}set(e){return new SOe(this.table,Dne(this.table,e),this.session,this.dialect,this.withList).setToken(this.authToken)}},SOe=class extends wa{constructor(e,t,r,n,a){super(),this.session=r,this.dialect=n,this.config={set:t,table:e,withList:a,joins:[]},this.tableName=mz(e),this.joinsNotNullableMap=typeof this.tableName=="string"?{[this.tableName]:!0}:{}}static[T]="PgUpdate";config;tableName;joinsNotNullableMap;from(e){let t=e,r=mz(t);return typeof r=="string"&&(this.joinsNotNullableMap[r]=!0),this.config.from=t,this}getTableLikeFields(e){return q(e,Rn)?e[J.Symbol.Columns]:q(e,Li)?e._.selectedFields:e[cr].selectedFields}createJoin(e){return(t,r)=>{let n=mz(t);if(typeof n=="string"&&this.config.joins.some(a=>a.alias===n))throw new Error(`Alias "${n}" is already used in this query`);if(typeof r=="function"){let a=this.config.from&&!q(this.config.from,te)?this.getTableLikeFields(this.config.from):void 0;r=r(new Proxy(this.config.table[J.Symbol.Columns],new ni({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})),a&&new Proxy(a,new ni({sqlAliasedBehavior:"sql",sqlBehavior:"sql"})))}if(this.config.joins.push({on:r,table:t,joinType:e,alias:n}),typeof n=="string")switch(e){case"left":{this.joinsNotNullableMap[n]=!1;break}case"right":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[n]=!0;break}case"inner":{this.joinsNotNullableMap[n]=!0;break}case"full":{this.joinsNotNullableMap=Object.fromEntries(Object.entries(this.joinsNotNullableMap).map(([a])=>[a,!1])),this.joinsNotNullableMap[n]=!1;break}}return this}}leftJoin=this.createJoin("left");rightJoin=this.createJoin("right");innerJoin=this.createJoin("inner");fullJoin=this.createJoin("full");where(e){return this.config.where=e,this}returning(e){if(!e&&(e=Object.assign({},this.config.table[J.Symbol.Columns]),this.config.from)){let t=mz(this.config.from);if(typeof t=="string"&&this.config.from&&!q(this.config.from,te)){let r=this.getTableLikeFields(this.config.from);e[t]=r}for(let r of this.config.joins){let n=mz(r.table);if(typeof n=="string"&&!q(r.table,te)){let a=this.getTableLikeFields(r.table);e[n]=a}}}return this.config.returningFields=e,this.config.returning=Ks(e),this}getSQL(){return this.dialect.buildUpdateQuery(this.config)}toSQL(){let{typings:e,...t}=this.dialect.sqlToQuery(this.getSQL());return t}_prepare(e){let t=this.session.prepareQuery(this.dialect.sqlToQuery(this.getSQL()),this.config.returning,e,!0);return t.joinsNotNullableMap=this.joinsNotNullableMap,t}prepare(e){return this._prepare(e)}authToken;setToken(e){return this.authToken=e,this}execute=e=>this._prepare().execute(e,this.authToken);getSelectedFields(){return this.config.returningFields?new Proxy(this.config.returningFields,new ni({alias:Co(this.config.table),sqlAliasedBehavior:"alias",sqlBehavior:"error"})):void 0}$dynamic(){return this}};var Ine=class i extends te{constructor(e){super(i.buildEmbeddedCount(e.source,e.filters).queryChunks),this.params=e,this.mapWith(Number),this.session=e.session,this.sql=i.buildCount(e.source,e.filters)}sql;token;static[T]="PgCountBuilder";[Symbol.toStringTag]="PgCountBuilder";session;static buildEmbeddedCount(e,t){return A`(select count(*) from ${e}${A.raw(" where ").if(t)}${t})`}static buildCount(e,t){return A`select count(*) as count from ${e}${A.raw(" where ").if(t)}${t};`}setToken(e){return this.token=e,this}then(e,t){return Promise.resolve(this.session.count(this.sql,this.token)).then(e,t)}catch(e){return this.then(void 0,e)}finally(e){return this.then(t=>(e?.(),t),t=>{throw e?.(),t})}};var Une=class{constructor(e,t,r,n,a,o,s){this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=a,this.dialect=o,this.session=s}static[T]="PgRelationalQueryBuilder";findMany(e){return new Lne(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e||{},"many")}findFirst(e){return new Lne(this.fullSchema,this.schema,this.tableNamesMap,this.table,this.tableConfig,this.dialect,this.session,e?{...e,limit:1}:{limit:1},"first")}},Lne=class extends wa{constructor(e,t,r,n,a,o,s,c,d){super(),this.fullSchema=e,this.schema=t,this.tableNamesMap=r,this.table=n,this.tableConfig=a,this.dialect=o,this.session=s,this.config=c,this.mode=d}static[T]="PgRelationalQuery";_prepare(e){return lr.startActiveSpan("drizzle.prepareQuery",()=>{let{query:t,builtQuery:r}=this._toSQL();return this.session.prepareQuery(r,void 0,e,!0,(n,a)=>{let o=n.map(s=>zne(this.schema,this.tableConfig,s,t.selection,a));return this.mode==="first"?o[0]:o})})}prepare(e){return this._prepare(e)}_getQuery(){return this.dialect.buildRelationalQueryWithoutPK({fullSchema:this.fullSchema,schema:this.schema,tableNamesMap:this.tableNamesMap,table:this.table,tableConfig:this.tableConfig,queryConfig:this.config,tableAlias:this.tableConfig.tsName})}getSQL(){return this._getQuery().sql}_toSQL(){let e=this._getQuery(),t=this.dialect.sqlToQuery(e.sql);return{query:e,builtQuery:t}}toSQL(){return this._toSQL().builtQuery}authToken;setToken(e){return this.authToken=e,this}execute(){return lr.startActiveSpan("drizzle.operation",()=>this._prepare().execute(void 0,this.authToken))}};var Fne=class extends wa{constructor(e,t,r,n){super(),this.execute=e,this.sql=t,this.query=r,this.mapBatchResult=n}static[T]="PgRaw";getSQL(){return this.sql}getQuery(){return this.query}mapResult(e,t){return t?this.mapBatchResult(e):e}_prepare(){return this}isResponseInArrayMode(){return!1}};var HW=class{constructor(e,t,r){if(this.dialect=e,this.session=t,this._=r?{schema:r.schema,fullSchema:r.fullSchema,tableNamesMap:r.tableNamesMap,session:t}:{schema:void 0,fullSchema:{},tableNamesMap:{},session:t},this.query={},this._.schema)for(let[n,a]of Object.entries(this._.schema))this.query[n]=new Une(r.fullSchema,this._.schema,this._.tableNamesMap,r.fullSchema[n],a,e,t)}static[T]="PgDatabase";query;$with=(e,t)=>{let r=this;return{as:a=>(typeof a=="function"&&(a=a(new KW(r.dialect))),new Proxy(new BW(a.getSQL(),t??("getSelectedFields"in a?a.getSelectedFields()??{}:{}),e,!0),new ni({alias:e,sqlAliasedBehavior:"alias",sqlBehavior:"error"})))}};$count(e,t){return new Ine({source:e,filters:t,session:this.session})}with(...e){let t=this;function r(d){return new ja({fields:d??void 0,session:t.session,dialect:t.dialect,withList:e})}function n(d){return new ja({fields:d??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:!0})}function a(d,l){return new ja({fields:l??void 0,session:t.session,dialect:t.dialect,withList:e,distinct:{on:d}})}function o(d){return new _Z(d,t.session,t.dialect,e)}function s(d){return new pZ(d,t.session,t.dialect,e)}function c(d){return new fZ(d,t.session,t.dialect,e)}return{select:r,selectDistinct:n,selectDistinctOn:a,update:o,insert:s,delete:c}}select(e){return new ja({fields:e??void 0,session:this.session,dialect:this.dialect})}selectDistinct(e){return new ja({fields:e??void 0,session:this.session,dialect:this.dialect,distinct:!0})}selectDistinctOn(e,t){return new ja({fields:t??void 0,session:this.session,dialect:this.dialect,distinct:{on:e}})}update(e){return new _Z(e,this.session,this.dialect)}insert(e){return new pZ(e,this.session,this.dialect)}delete(e){return new fZ(e,this.session,this.dialect)}refreshMaterializedView(e){return new Bne(e,this.session,this.dialect)}authToken;execute(e){let t=typeof e=="string"?A.raw(e):e.getSQL(),r=this.dialect.sqlToQuery(t),n=this.session.prepareQuery(r,void 0,void 0,!1);return new Fne(()=>n.execute(void 0,this.authToken),t,r,a=>n.mapResult(a,!0))}transaction(e,t){return this.session.transaction(e,t)}};var MOe=class{constructor(e,t){this.unique=e,this.name=t}static[T]="PgIndexBuilderOn";on(...e){return new hZ(e.map(t=>{if(q(t,te))return t;t=t;let r=new qW(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=JSON.parse(JSON.stringify(t.defaultConfig)),r}),this.unique,!1,this.name)}onOnly(...e){return new hZ(e.map(t=>{if(q(t,te))return t;t=t;let r=new qW(t.name,!!t.keyAsName,t.columnType,t.indexConfig);return t.indexConfig=t.defaultConfig,r}),this.unique,!0,this.name)}using(e,...t){return new hZ(t.map(r=>{if(q(r,te))return r;r=r;let n=new qW(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),n}),this.unique,!0,this.name,e)}},hZ=class{static[T]="PgIndexBuilder";config;constructor(e,t,r,n,a="btree"){this.config={name:n,columns:e,unique:t,only:r,method:a}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new DOe(this.config,e)}},DOe=class{static[T]="PgIndex";config;constructor(e,t){this.config={...e,table:t}}};function zet(i){return new MOe(!1,i)}var Vne=class{constructor(e){this.query=e}authToken;getQuery(){return this.query}mapResult(e,t){return e}setToken(e){return this.authToken=e,this}static[T]="PgPreparedQuery";joinsNotNullableMap},Kne=class{constructor(e){this.dialect=e}static[T]="PgSession";execute(e,t){return lr.startActiveSpan("drizzle.operation",()=>lr.startActiveSpan("drizzle.prepareQuery",()=>this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1)).setToken(t).execute(void 0,t))}all(e){return this.prepareQuery(this.dialect.sqlToQuery(e),void 0,void 0,!1).all()}async count(e,t){let r=await this.execute(e,t);return Number(r[0].count)}},Hne=class extends HW{constructor(e,t,r,n=0){super(e,t,r),this.schema=r,this.nestedIndex=n}static[T]="PgTransaction";rollback(){throw new wne}getTransactionConfigSQL(e){let t=[];return e.isolationLevel&&t.push(`isolation level ${e.isolationLevel}`),e.accessMode&&t.push(e.accessMode),typeof e.deferrable=="boolean"&&t.push(e.deferrable?"deferrable":"not deferrable"),A.raw(t.join(" "))}setTransaction(e){return this.session.execute(A`set transaction ${this.getTransactionConfigSQL(e)}`)}};var ct;(function(i){i.assertEqual=n=>n;function e(n){}i.assertIs=e;function t(n){throw new Error}i.assertNever=t,i.arrayToEnum=n=>{let a={};for(let o of n)a[o]=o;return a},i.getValidEnumValues=n=>{let a=i.objectKeys(n).filter(s=>typeof n[n[s]]!="number"),o={};for(let s of a)o[s]=n[s];return i.objectValues(o)},i.objectValues=n=>i.objectKeys(n).map(function(a){return n[a]}),i.objectKeys=typeof Object.keys=="function"?n=>Object.keys(n):n=>{let a=[];for(let o in n)Object.prototype.hasOwnProperty.call(n,o)&&a.push(o);return a},i.find=(n,a)=>{for(let o of n)if(a(o))return o},i.isInteger=typeof Number.isInteger=="function"?n=>Number.isInteger(n):n=>typeof n=="number"&&isFinite(n)&&Math.floor(n)===n;function r(n,a=" | "){return n.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}i.joinValues=r,i.jsonStringifyReplacer=(n,a)=>typeof a=="bigint"?a.toString():a})(ct||(ct={}));var ROe;(function(i){i.mergeShapes=(e,t)=>({...e,...t})})(ROe||(ROe={}));var re=ct.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Pz=i=>{switch(typeof i){case"undefined":return re.undefined;case"string":return re.string;case"number":return isNaN(i)?re.nan:re.number;case"boolean":return re.boolean;case"function":return re.function;case"bigint":return re.bigint;case"symbol":return re.symbol;case"object":return Array.isArray(i)?re.array:i===null?re.null:i.then&&typeof i.then=="function"&&i.catch&&typeof i.catch=="function"?re.promise:typeof Map<"u"&&i instanceof Map?re.map:typeof Set<"u"&&i instanceof Set?re.set:typeof Date<"u"&&i instanceof Date?re.date:re.object;default:return re.unknown}},K=ct.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),aNr=i=>JSON.stringify(i,null,2).replace(/"([^"]+)":/g,"$1:"),Yu=class i extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){let t=e||function(a){return a.message},r={_errors:[]},n=a=>{for(let o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(n);else if(o.code==="invalid_return_type")n(o.returnTypeError);else if(o.code==="invalid_arguments")n(o.argumentsError);else if(o.path.length===0)r._errors.push(t(o));else{let s=r,c=0;for(;c<o.path.length;){let d=o.path[c];c===o.path.length-1?(s[d]=s[d]||{_errors:[]},s[d]._errors.push(t(o))):s[d]=s[d]||{_errors:[]},s=s[d],c++}}};return n(this),r}static assert(e){if(!(e instanceof i))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ct.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){let t={},r=[];for(let n of this.issues)n.path.length>0?(t[n.path[0]]=t[n.path[0]]||[],t[n.path[0]].push(e(n))):r.push(e(n));return{formErrors:r,fieldErrors:t}}get formErrors(){return this.flatten()}};Yu.create=i=>new Yu(i);var $W=(i,e)=>{let t;switch(i.code){case K.invalid_type:i.received===re.undefined?t="Required":t=`Expected ${i.expected}, received ${i.received}`;break;case K.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(i.expected,ct.jsonStringifyReplacer)}`;break;case K.unrecognized_keys:t=`Unrecognized key(s) in object: ${ct.joinValues(i.keys,", ")}`;break;case K.invalid_union:t="Invalid input";break;case K.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${ct.joinValues(i.options)}`;break;case K.invalid_enum_value:t=`Invalid enum value. Expected ${ct.joinValues(i.options)}, received '${i.received}'`;break;case K.invalid_arguments:t="Invalid function arguments";break;case K.invalid_return_type:t="Invalid function return type";break;case K.invalid_date:t="Invalid date";break;case K.invalid_string:typeof i.validation=="object"?"includes"in i.validation?(t=`Invalid input: must include "${i.validation.includes}"`,typeof i.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${i.validation.position}`)):"startsWith"in i.validation?t=`Invalid input: must start with "${i.validation.startsWith}"`:"endsWith"in i.validation?t=`Invalid input: must end with "${i.validation.endsWith}"`:ct.assertNever(i.validation):i.validation!=="regex"?t=`Invalid ${i.validation}`:t="Invalid";break;case K.too_small:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at least":"more than"} ${i.minimum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at least":"over"} ${i.minimum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${i.minimum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly equal to ":i.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(i.minimum))}`:t="Invalid input";break;case K.too_big:i.type==="array"?t=`Array must contain ${i.exact?"exactly":i.inclusive?"at most":"less than"} ${i.maximum} element(s)`:i.type==="string"?t=`String must contain ${i.exact?"exactly":i.inclusive?"at most":"under"} ${i.maximum} character(s)`:i.type==="number"?t=`Number must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="bigint"?t=`BigInt must be ${i.exact?"exactly":i.inclusive?"less than or equal to":"less than"} ${i.maximum}`:i.type==="date"?t=`Date must be ${i.exact?"exactly":i.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(i.maximum))}`:t="Invalid input";break;case K.custom:t="Invalid input";break;case K.invalid_intersection_types:t="Intersection results could not be merged";break;case K.not_multiple_of:t=`Number must be a multiple of ${i.multipleOf}`;break;case K.not_finite:t="Number must be finite";break;default:t=e.defaultError,ct.assertNever(i)}return{message:t}},qet=$W;function oNr(i){qet=i}function Gne(){return qet}var Wne=i=>{let{data:e,path:t,errorMaps:r,issueData:n}=i,a=[...t,...n.path||[]],o={...n,path:a};if(n.message!==void 0)return{...n,path:a,message:n.message};let s="",c=r.filter(d=>!!d).slice().reverse();for(let d of c)s=d(o,{data:e,defaultError:s}).message;return{...n,path:a,message:s}},uNr=[];function Y(i,e){let t=Gne(),r=Wne({issueData:e,data:i.data,path:i.path,errorMaps:[i.common.contextualErrorMap,i.schemaErrorMap,t,t===$W?void 0:$W].filter(n=>!!n)});i.common.issues.push(r)}var Pa=class i{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){let r=[];for(let n of t){if(n.status==="aborted")return me;n.status==="dirty"&&e.dirty(),r.push(n.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,t){let r=[];for(let n of t){let a=await n.key,o=await n.value;r.push({key:a,value:o})}return i.mergeObjectSync(e,r)}static mergeObjectSync(e,t){let r={};for(let n of t){let{key:a,value:o}=n;if(a.status==="aborted"||o.status==="aborted")return me;a.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||n.alwaysSet)&&(r[a.value]=o.value)}return{status:e.value,value:r}}},me=Object.freeze({status:"aborted"}),WW=i=>({status:"dirty",value:i}),ao=i=>({status:"valid",value:i}),COe=i=>i.status==="aborted",zOe=i=>i.status==="dirty",kI=i=>i.status==="valid",gZ=i=>typeof Promise<"u"&&i instanceof Promise;function $ne(i,e,t,r){if(t==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?r:t==="a"?r.call(i):r?r.value:e.get(i)}function Bet(i,e,t,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!n:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(i,t):n?n.value=t:e.set(i,t),t}var ce;(function(i){i.errToObj=e=>typeof e=="string"?{message:e}:e||{},i.toString=e=>typeof e=="string"?e:e?.message})(ce||(ce={}));var vZ,bZ,Gs=class{constructor(e,t,r,n){this._cachedPath=[],this.parent=e,this.data=t,this._path=r,this._key=n}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},Tet=(i,e)=>{if(kI(e))return{success:!0,data:e.value};if(!i.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let t=new Yu(i.common.issues);return this._error=t,this._error}}};function Ne(i){if(!i)return{};let{errorMap:e,invalid_type_error:t,required_error:r,description:n}=i;if(e&&(t||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:n}:{errorMap:(o,s)=>{var c,d;let{message:l}=i;return o.code==="invalid_enum_value"?{message:l??s.defaultError}:typeof s.data>"u"?{message:(c=l??r)!==null&&c!==void 0?c:s.defaultError}:o.code!=="invalid_type"?{message:s.defaultError}:{message:(d=l??t)!==null&&d!==void 0?d:s.defaultError}},description:n}}var qe=class{get description(){return this._def.description}_getType(e){return Pz(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:Pz(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new Pa,ctx:{common:e.parent.common,data:e.data,parsedType:Pz(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let t=this._parse(e);if(gZ(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){let t=this._parse(e);return Promise.resolve(t)}parse(e,t){let r=this.safeParse(e,t);if(r.success)return r.data;throw r.error}safeParse(e,t){var r;let n={common:{issues:[],async:(r=t?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pz(e)},a=this._parseSync({data:e,path:n.path,parent:n});return Tet(n,a)}"~validate"(e){var t,r;let n={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pz(e)};if(!this["~standard"].async)try{let a=this._parseSync({data:e,path:[],parent:n});return kI(a)?{value:a.value}:{issues:n.common.issues}}catch(a){!((r=(t=a?.message)===null||t===void 0?void 0:t.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),n.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:n}).then(a=>kI(a)?{value:a.value}:{issues:n.common.issues})}async parseAsync(e,t){let r=await this.safeParseAsync(e,t);if(r.success)return r.data;throw r.error}async safeParseAsync(e,t){let r={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Pz(e)},n=this._parse({data:e,path:r.path,parent:r}),a=await(gZ(n)?n:Promise.resolve(n));return Tet(r,a)}refine(e,t){let r=n=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(n):t;return this._refinement((n,a)=>{let o=e(n),s=()=>a.addIssue({code:K.custom,...r(n)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(s(),!1)):o?!0:(s(),!1)})}refinement(e,t){return this._refinement((r,n)=>e(r)?!0:(n.addIssue(typeof t=="function"?t(r,n):t),!1))}_refinement(e){return new Ju({schema:this,typeName:ye.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return Hs.create(this,this._def)}nullable(){return Ed.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Mz.create(this)}promise(){return KT.create(this,this._def)}or(e){return oU.create([this,e],this._def)}and(e){return uU.create(this,e,this._def)}transform(e){return new Ju({...Ne(this._def),schema:this,typeName:ye.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let t=typeof e=="function"?e:()=>e;return new fU({...Ne(this._def),innerType:this,defaultValue:t,typeName:ye.ZodDefault})}brand(){return new yZ({typeName:ye.ZodBranded,type:this,...Ne(this._def)})}catch(e){let t=typeof e=="function"?e:()=>e;return new pU({...Ne(this._def),innerType:this,catchValue:t,typeName:ye.ZodCatch})}describe(e){let t=this.constructor;return new t({...this._def,description:e})}pipe(e){return mZ.create(this,e)}readonly(){return _U.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},sNr=/^c[^\s-]{8,}$/i,lNr=/^[0-9a-z]+$/,cNr=/^[0-9A-HJKMNP-TV-Z]{26}$/i,dNr=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,fNr=/^[a-z0-9_-]{21}$/i,pNr=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,_Nr=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,hNr=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vNr="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",EOe,bNr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,gNr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,yNr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,mNr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,ONr=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,wNr=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Iet="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jNr=new RegExp(`^${Iet}$`);function Uet(i){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return i.precision?e=`${e}\\.\\d{${i.precision}}`:i.precision==null&&(e=`${e}(\\.\\d+)?`),e}function PNr(i){return new RegExp(`^${Uet(i)}$`)}function Let(i){let e=`${Iet}T${Uet(i)}`,t=[];return t.push(i.local?"Z?":"Z"),i.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function SNr(i,e){return!!((e==="v4"||!e)&&bNr.test(i)||(e==="v6"||!e)&&yNr.test(i))}function MNr(i,e){if(!pNr.test(i))return!1;try{let[t]=i.split("."),r=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),n=JSON.parse(atob(r));return!(typeof n!="object"||n===null||!n.typ||!n.alg||e&&n.alg!==e)}catch{return!1}}function DNr(i,e){return!!((e==="v4"||!e)&&gNr.test(i)||(e==="v6"||!e)&&mNr.test(i))}var FT=class i extends qe{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==re.string){let a=this._getOrReturnCtx(e);return Y(a,{code:K.invalid_type,expected:re.string,received:a.parsedType}),me}let r=new Pa,n;for(let a of this._def.checks)if(a.kind==="min")e.data.length<a.value&&(n=this._getOrReturnCtx(e,n),Y(n,{code:K.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="max")e.data.length>a.value&&(n=this._getOrReturnCtx(e,n),Y(n,{code:K.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),r.dirty());else if(a.kind==="length"){let o=e.data.length>a.value,s=e.data.length<a.value;(o||s)&&(n=this._getOrReturnCtx(e,n),o?Y(n,{code:K.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):s&&Y(n,{code:K.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),r.dirty())}else if(a.kind==="email")hNr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"email",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="emoji")EOe||(EOe=new RegExp(vNr,"u")),EOe.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"emoji",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="uuid")dNr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"uuid",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="nanoid")fNr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"nanoid",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid")sNr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"cuid",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="cuid2")lNr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"cuid2",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="ulid")cNr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"ulid",code:K.invalid_string,message:a.message}),r.dirty());else if(a.kind==="url")try{new URL(e.data)}catch{n=this._getOrReturnCtx(e,n),Y(n,{validation:"url",code:K.invalid_string,message:a.message}),r.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"regex",code:K.invalid_string,message:a.message}),r.dirty())):a.kind==="trim"?e.data=e.data.trim():a.kind==="includes"?e.data.includes(a.value,a.position)||(n=this._getOrReturnCtx(e,n),Y(n,{code:K.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),r.dirty()):a.kind==="toLowerCase"?e.data=e.data.toLowerCase():a.kind==="toUpperCase"?e.data=e.data.toUpperCase():a.kind==="startsWith"?e.data.startsWith(a.value)||(n=this._getOrReturnCtx(e,n),Y(n,{code:K.invalid_string,validation:{startsWith:a.value},message:a.message}),r.dirty()):a.kind==="endsWith"?e.data.endsWith(a.value)||(n=this._getOrReturnCtx(e,n),Y(n,{code:K.invalid_string,validation:{endsWith:a.value},message:a.message}),r.dirty()):a.kind==="datetime"?Let(a).test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{code:K.invalid_string,validation:"datetime",message:a.message}),r.dirty()):a.kind==="date"?jNr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{code:K.invalid_string,validation:"date",message:a.message}),r.dirty()):a.kind==="time"?PNr(a).test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{code:K.invalid_string,validation:"time",message:a.message}),r.dirty()):a.kind==="duration"?_Nr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"duration",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="ip"?SNr(e.data,a.version)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"ip",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="jwt"?MNr(e.data,a.alg)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"jwt",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="cidr"?DNr(e.data,a.version)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"cidr",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="base64"?ONr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"base64",code:K.invalid_string,message:a.message}),r.dirty()):a.kind==="base64url"?wNr.test(e.data)||(n=this._getOrReturnCtx(e,n),Y(n,{validation:"base64url",code:K.invalid_string,message:a.message}),r.dirty()):ct.assertNever(a);return{status:r.value,value:e.data}}_regex(e,t,r){return this.refinement(n=>e.test(n),{validation:t,code:K.invalid_string,...ce.errToObj(r)})}_addCheck(e){return new i({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...ce.errToObj(e)})}url(e){return this._addCheck({kind:"url",...ce.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...ce.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...ce.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...ce.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...ce.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...ce.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...ce.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...ce.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...ce.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...ce.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...ce.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...ce.errToObj(e)})}datetime(e){var t,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(t=e?.offset)!==null&&t!==void 0?t:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...ce.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...ce.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...ce.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...ce.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...ce.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...ce.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...ce.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...ce.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...ce.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...ce.errToObj(t)})}nonempty(e){return this.min(1,ce.errToObj(e))}trim(){return new i({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new i({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new i({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};FT.create=i=>{var e;return new FT({checks:[],typeName:ye.ZodString,coerce:(e=i?.coerce)!==null&&e!==void 0?e:!1,...Ne(i)})};function ENr(i,e){let t=(i.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,n=t>r?t:r,a=parseInt(i.toFixed(n).replace(".","")),o=parseInt(e.toFixed(n).replace(".",""));return a%o/Math.pow(10,n)}var eU=class i extends qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==re.number){let a=this._getOrReturnCtx(e);return Y(a,{code:K.invalid_type,expected:re.number,received:a.parsedType}),me}let r,n=new Pa;for(let a of this._def.checks)a.kind==="int"?ct.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Y(r,{code:K.invalid_type,expected:"integer",received:"float",message:a.message}),n.dirty()):a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:K.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:K.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),n.dirty()):a.kind==="multipleOf"?ENr(e.data,a.value)!==0&&(r=this._getOrReturnCtx(e,r),Y(r,{code:K.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):a.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Y(r,{code:K.not_finite,message:a.message}),n.dirty()):ct.assertNever(a);return{status:n.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,r,n){return new i({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ce.toString(n)}]})}_addCheck(e){return new i({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:ce.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:ce.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:ce.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:ce.toString(e)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ct.isInteger(e.value))}get isFinite(){let e=null,t=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(t===null||r.value>t)&&(t=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(t)&&Number.isFinite(e)}};eU.create=i=>new eU({checks:[],typeName:ye.ZodNumber,coerce:i?.coerce||!1,...Ne(i)});var tU=class i extends qe{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==re.bigint)return this._getInvalidInput(e);let r,n=new Pa;for(let a of this._def.checks)a.kind==="min"?(a.inclusive?e.data<a.value:e.data<=a.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:K.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="max"?(a.inclusive?e.data>a.value:e.data>=a.value)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:K.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),n.dirty()):a.kind==="multipleOf"?e.data%a.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Y(r,{code:K.not_multiple_of,multipleOf:a.value,message:a.message}),n.dirty()):ct.assertNever(a);return{status:n.value,value:e.data}}_getInvalidInput(e){let t=this._getOrReturnCtx(e);return Y(t,{code:K.invalid_type,expected:re.bigint,received:t.parsedType}),me}gte(e,t){return this.setLimit("min",e,!0,ce.toString(t))}gt(e,t){return this.setLimit("min",e,!1,ce.toString(t))}lte(e,t){return this.setLimit("max",e,!0,ce.toString(t))}lt(e,t){return this.setLimit("max",e,!1,ce.toString(t))}setLimit(e,t,r,n){return new i({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:r,message:ce.toString(n)}]})}_addCheck(e){return new i({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:ce.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:ce.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:ce.toString(t)})}get minValue(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}};tU.create=i=>{var e;return new tU({checks:[],typeName:ye.ZodBigInt,coerce:(e=i?.coerce)!==null&&e!==void 0?e:!1,...Ne(i)})};var rU=class extends qe{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==re.boolean){let r=this._getOrReturnCtx(e);return Y(r,{code:K.invalid_type,expected:re.boolean,received:r.parsedType}),me}return ao(e.data)}};rU.create=i=>new rU({typeName:ye.ZodBoolean,coerce:i?.coerce||!1,...Ne(i)});var iU=class i extends qe{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==re.date){let a=this._getOrReturnCtx(e);return Y(a,{code:K.invalid_type,expected:re.date,received:a.parsedType}),me}if(isNaN(e.data.getTime())){let a=this._getOrReturnCtx(e);return Y(a,{code:K.invalid_date}),me}let r=new Pa,n;for(let a of this._def.checks)a.kind==="min"?e.data.getTime()<a.value&&(n=this._getOrReturnCtx(e,n),Y(n,{code:K.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),r.dirty()):a.kind==="max"?e.data.getTime()>a.value&&(n=this._getOrReturnCtx(e,n),Y(n,{code:K.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),r.dirty()):ct.assertNever(a);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new i({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:ce.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:ce.toString(t)})}get minDate(){let e=null;for(let t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}};iU.create=i=>new iU({checks:[],coerce:i?.coerce||!1,typeName:ye.ZodDate,...Ne(i)});var QW=class extends qe{_parse(e){if(this._getType(e)!==re.symbol){let r=this._getOrReturnCtx(e);return Y(r,{code:K.invalid_type,expected:re.symbol,received:r.parsedType}),me}return ao(e.data)}};QW.create=i=>new QW({typeName:ye.ZodSymbol,...Ne(i)});var nU=class extends qe{_parse(e){if(this._getType(e)!==re.undefined){let r=this._getOrReturnCtx(e);return Y(r,{code:K.invalid_type,expected:re.undefined,received:r.parsedType}),me}return ao(e.data)}};nU.create=i=>new nU({typeName:ye.ZodUndefined,...Ne(i)});var aU=class extends qe{_parse(e){if(this._getType(e)!==re.null){let r=this._getOrReturnCtx(e);return Y(r,{code:K.invalid_type,expected:re.null,received:r.parsedType}),me}return ao(e.data)}};aU.create=i=>new aU({